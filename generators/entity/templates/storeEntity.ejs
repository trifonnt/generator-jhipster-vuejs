<%_ include fns.ejs -%>
import {
	<%_ for(relationship of relationships) { -%>
		get<%=addS(firstToUpper(relationship.relationshipName))%>Data,
	<%_ } -%>
} from '../fetchers/<%=toLower(name)%>'

let store = require('./entity').default('<%=toLower(name)%>');
<% for(relationship of relationships) { 
	let thename = addS(firstToUpper(relationship.relationshipName))
	if(!(relationship.relationshipType == 'many-to-many' && relationship.ownerSide==false)) {
%>
	store.get<%=thename%> = async function() {
		try {
			let response = await get<%=thename%>Data();
			return response;
			//return response.map(u=>({id: u.id, <%=relationship.otherEntityField%>: u.<%=relationship.otherEntityField%>})) 
		}
		catch(err) {
			console.log(err)
		}
	}
<% } } %>

try {
	let extend = require('./<%=name%>Extend')
	Object.assign(store, extend)
} catch(err) {
	console.log(err)
}

export default store;